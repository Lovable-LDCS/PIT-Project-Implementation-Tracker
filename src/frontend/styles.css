/* Brand tokens and base */
:root {
  --sidebar-w: 260px;
  --topbar-h: 56px;
  --brand-primary: #006B92;
  --brand-accent: #0D2850;
  --brand-secondary1: #4C95B0;
  --brand-secondary2: #CCE1E9;
  --font-body: 'Trebuchet MS', Arial, sans-serif;
  --font-heading: 'Trebuchet MS', Arial, sans-serif;
  --tl-label-w: 220px;
  --tl-gutter: 32px; /* left inner gutter inside scrollable canvas */
}
body { margin: 0; font-family: var(--font-body); color: #0f172a; background: #ffffff; }
[hidden]{ display: none !important; }
h1,h2,h3 { font-family: var(--font-heading); }

/* Shell layout */
.topbar { grid-area: topbar; height: var(--topbar-h); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; border-bottom: 1px solid #e5e7eb; background: var(--brand-accent); color: #ffffff; }
.brand { display:flex; align-items:center; gap: 8px; }
.brand-logo { height: 28px; width:auto; display:block; }
.sidebar { grid-area: sidebar; width: var(--sidebar-w); min-width: var(--sidebar-w); border-right: 1px solid #e5e7eb; background: var(--brand-secondary2); padding: 16px; }
.layout { display: grid; grid-template-columns: var(--sidebar-w) 1fr; grid-template-rows: var(--topbar-h) calc(100vh - var(--topbar-h)); grid-template-areas: "topbar topbar" "sidebar content"; }
.content { grid-area: content; padding: 24px; overflow: auto; }
.breadcrumbs { font-size: 12px; color: #374151; margin-bottom: 12px; }

/* Nav */
.nav a { display: block; padding: 10px 12px; color: #0D2850; text-decoration: none; border-radius: 6px; margin-bottom: 6px; }
.nav a[aria-current="page"] { background: var(--brand-primary); color: #ffffff; font-weight: 600; }

/* Controls */
.btn { padding: 8px 12px; border: 1px solid var(--brand-secondary1); background: #fff; color: #0D2850; border-radius: 6px; cursor: pointer; }
.btn.primary { background: var(--brand-primary); color: #ffffff; border-color: var(--brand-primary); }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
input, select, textarea { padding: 6px 8px; border: 1px solid #cbd5e1; border-radius: 6px; font-family: var(--font-body); }

/* Projects detail view */
.proj-detail { padding: 16px; }
.proj-title { font-size: 1.5rem; color: #0D2850; margin: 0 0 4px 0; }
.proj-meta { color: #4C95B0; font-size: 0.95rem; }
.proj-summary { display:grid; grid-template-columns: repeat(8, minmax(80px, auto)); gap: 8px; align-items:center; padding: 8px; border: 1px solid #e5e7eb; border-radius: 6px; margin: 12px 0; }
.design-ref { padding: 12px; border: 1px dashed var(--brand-secondary1); background: #fff; }

/* Project indicators row */
.proj-indicators { display: flex; gap: 24px; align-items: center; flex-wrap: wrap; padding: 12px 16px; background: #f8fafc; border: 1px solid #e5e7eb; border-radius: 8px; margin: 16px 0; }
.proj-indicator { display: flex; flex-direction: column; gap: 4px; }
.proj-indicator-label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
.proj-indicator-value { font-size: 1.25rem; font-weight: 600; color: #0D2850; }
.proj-indicator-progress { display: flex; align-items: center; gap: 8px; }
.progress-bar { height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; flex: 1; min-width: 80px; }
.progress-fill { height: 100%; background: var(--brand-primary); transition: width 0.3s ease; }

/* Hierarchy row color coding */
.row-project { background-color: #0D2850; color: #ffffff; padding: 8px; border-radius: 4px; font-weight: 600; }
.row-milestone { background-color: #006B92; color: #ffffff; padding: 8px; border-radius: 4px; font-weight: 500; }
.row-deliverable { background-color: #4C95B0; color: #ffffff; padding: 8px; border-radius: 4px; }
.row-task { background-color: #ffffff; color: #0D2850; padding: 8px; border: 1px solid #e5e7eb; border-radius: 4px; }

/* Filters banner card */
.filter-card { display:grid; grid-template-columns: repeat(7, minmax(120px, 1fr)); gap: 12px; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; background: #f8fafc; margin-bottom: 12px; }

/* Build grid and rows */
.proj-grid { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 1fr 1fr; gap: 8px; align-items: start; }
.proj-grid.header { font-weight: 600; color: #0D2850; padding: 6px 0; border-bottom: 1px solid #e5e7eb; margin-top: 8px; }
.proj-row { display: contents; }

/* Utilities */
.qa-clip-img { max-width:100%; border:1px solid #e5e7eb; border-radius:4px; }
.inline-flex-center { display:flex; gap: 8px; align-items: center; }
.mb-12 { margin-bottom: 12px; }
.filters-bar { margin-bottom: 12px; }
.kpi-row { display:flex; gap:12px; }
.mt-16 { margin-top: 16px; }
.my-8 { margin: 8px 0; }
.w-64 { width: 64px; }
.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.grid-span-full { grid-column: 1 / -1; }
.textarea-full { width: 100%; min-height: 96px; max-height: 50vh; resize: vertical; }
.actions-right { display:flex; gap:8px; justify-content:flex-end; margin-top:16px; }
.actions-left { display:flex; gap:8px; margin:12px 0; }
.ms-block { padding-left:8px; border-left:2px solid var(--brand-secondary1); }
.deliv-list { margin-left:16px; }
.indent-1 { margin-left: 16px; }
.indent-2 { margin-left: 32px; }

/* Modal */
.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:center; z-index: 1000; }
.modal-dialog { background:#fff; padding:16px; border-radius:8px; width:720px; max-width:95vw; }
.modal-header { display:flex; align-items:center; justify-content:space-between; }
.modal-title { margin-top:0; }

/* Access matrix */
.funcs-row { display:flex; gap:8px; flex-wrap:wrap; }
.roles-list { margin-top:8px; }
.grid-roles { display:grid; grid-template-columns: repeat(6, 1fr); gap:4px; margin-top:8px; }

/* Gantt */
.gantt-canvas { height:240px; border:1px dashed var(--brand-secondary1); display:flex; align-items:center; justify-content:center; }

/* Timelines */
:root {
  --tl-proj: #0D2850; /* Project */
  --tl-ms: #006B92;   /* Milestone */
  --tl-dl: #4C95B0;   /* Deliverable */
  --tl-task: #CCE1E9; /* Task (light) */
}
.timeline-canvas { border:1px solid #e5e7eb; background:#fff; min-height: 320px; position: relative; z-index: 110; margin-left: var(--tl-gutter); }
.timeline-toolbar { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
 .flex-spacer { flex: 1 1 auto; }

/* Two pane grid: labels frozen left, scrollable right */
.tl-grid { display:grid; grid-template-columns: var(--tl-label-w) 1fr; gap:0; align-items:start; overflow:hidden; border:1px solid #e5e7eb; border-radius:8px; background:#fff; }
.tl-labels { position: sticky; left:0; top:0; background:#fff; border-right:1px solid #e5e7eb; z-index:1; pointer-events: none; }
.tl-label-header { position: sticky; top:0; background:#f8fafc; border-bottom:1px solid #e5e7eb; font-weight:600; padding:6px 8px; z-index: 3; }
.tl-scroll { overflow:auto; max-width: 100%; position: relative; z-index: 100; padding-left: 12px; background: #fff; }
.tl-axis { font-size: 12px; color:#334155; padding: 4px 0; border-bottom:1px solid #e5e7eb; position: relative; height: 22px; z-index: 120; }
.tl-axis-spacer { height: 22px; border-bottom:1px solid #e5e7eb; }
.tl-header-spacer { height: 28px; }
.tl-lanes { position: relative; padding: 8px 0; z-index: 1; }
.tl-lanes-spacer { height: 8px; }
.tl-lane { display:flex; align-items:center; gap:8px; padding:6px 0; border-bottom:1px dashed #e5e7eb; position: relative; }
.tl-bar { height: 18px; border-radius: 4px; position: absolute; cursor: ew-resize; z-index: 150; }
.tl-label { position: absolute; top: -18px; font-size: 11px; color: #0D2850; background: #fff; border: 1px solid #e5e7eb; border-radius: 3px; padding: 1px 4px; white-space: nowrap; z-index: 160; pointer-events: none; }
.tl-bar.proj { background: var(--tl-proj); }
.tl-bar.ms { background: var(--tl-ms); }
.tl-bar.dl { background: var(--tl-dl); }
.tl-bar.task { background: var(--tl-task); border:1px solid #0D2850; }
.tl-handle { width: 6px; background:#111827; opacity:0.6; height: 100%; position:absolute; top:0; cursor:col-resize; }
.tl-handle.start { left: -3px; }
.tl-handle.end { right: -3px; }
/* Axis ticks */
.tl-tick { position:absolute; top:0; bottom:0; border-left:1px solid #e5e7eb; }
.tl-tick-label { position:absolute; top:0; transform: translateX(-50%); background:#fff; padding:0 2px; }

/* Timelines TEST layout */
.tltest-toolbar { display:flex; gap:8px; align-items:center; margin-bottom:8px; }
.tltest-toolbar .btn.selected{ border:2px solid #0D2850; }
.tltest-axes { margin-bottom: 4px; }
.tltest-axes-scroll { overflow:auto; }
.tltest-grid { display:grid; grid-template-columns: var(--tl-label-w) 6px 160px 6px 1fr; gap:0; border:1px solid #e5e7eb; border-radius:8px; background:#fff; overflow-x:auto; overflow-y:hidden; }
.tltest-left { position:sticky; left:0; top:0; border-right:1px solid #e5e7eb; background:#fff; pointer-events:none; }
.tltest-resizer { cursor:col-resize; background: #e5e7eb; }
.tltest-progress { background:#fff; border-right:1px solid #e5e7eb; min-width: 120px; }
.tltest-right { min-width: 240px; }
.tltest-scroll { overflow:auto; position:relative; }
.tltest-axis { height:24px; border-bottom:1px solid #e5e7eb; font-size:11px; color:#334155; position:relative; cursor:pointer; }
.tltest-axis .tl-tick-label{ white-space:nowrap; background:#fff; }
.tltest-axis.collapsed { height:16px; }
.tltest-axis.collapsed .tl-tick-label{ display:none; }
.tltest-spacer { height:24px; border-bottom:1px solid #e5e7eb; }
.tltest-canvas { position:relative; min-height:280px; border-top:1px solid #e5e7eb; }
.tltest-row { display:grid; grid-template-columns: 1fr 1fr; }

/* Progress cell */
.tltest-progress-row { padding:6px 8px; border-bottom:1px dashed #e5e7eb; font-size:12px; }

/* Bars + overlay */
.tltest-bar { position:absolute; height:18px; border-radius:4px; z-index:2; }
.tltest-bar .overlay { position:absolute; left:0; top:0; bottom:0; background:rgba(255,255,255,0.3); border-radius:4px 0 0 4px; z-index:3; }

/* Labels */
.tltest-label-row { padding:6px 8px; border-bottom:1px dashed #e5e7eb; white-space:normal; word-break:break-word; }
.tltest-label-row.lvl-0 { font-weight:600; padding-left: 8px; }
.tltest-label-row.lvl-1 { padding-left: 24px; }
.tltest-label-row.lvl-2 { padding-left: 40px; }
.tltest-label-row.lvl-3 { padding-left: 56px; font-size:12px; }
/* Label rows with indentation to reflect hierarchy */
.tl-label-row { padding:6px 8px; border-bottom:1px dashed #e5e7eb; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.tl-label-row.lvl-0 { font-weight:600; padding-left: 8px; }
.tl-label-row.lvl-1 { padding-left: 24px; }
.tl-label-row.lvl-2 { padding-left: 40px; }
.tl-label-row.lvl-3 { padding-left: 56px; }
/* Ensure timeline container does not overlap sidebar: add inner margin */
section[data-testid="TID-TL-PAGE"] .tl-grid { margin-left: 8px; margin-right: 8px; }
/* Optional: visibly show the gutter during debugging */
/* .timeline-canvas::before { content:''; position:absolute; left:calc(-1 * var(--tl-gutter)); top:0; bottom:0; width:var(--tl-gutter); background:transparent; } */

/* Preview Toggle */
.preview-toggle {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-right: 12px;
  padding: 4px 8px;
  background: #1e293b;
  border-radius: 4px;
}

.preview-toggle span {
  font-size: 0.75rem;
  color: #94a3b8;
}

.preview-toggle .btn {
  padding: 4px 8px;
  font-size: 0.75rem;
}

/* Admin Section Divider */
.admin-divider {
  margin: 12px 0;
  border-color: #334155;
}

.admin-section-label {
  font-size: 0.75rem;
  color: #94a3b8;
  padding: 4px 0;
  text-transform: uppercase;
}

/* Sidebar Controls */
.sidebar-controls {
  padding: 12px;
  border-top: 1px solid #334155;
}

.sidebar-controls label {
  display: block;
  margin-bottom: 8px;
}

.sidebar-controls label span {
  font-size: 0.75rem;
  color: #94a3b8;
}

.sidebar-controls select {
  width: 100%;
  margin-top: 4px;
}

.sidebar-controls .btn {
  width: 100%;
  padding: 6px;
  font-size: 0.875rem;
}

/* Health Checker */
.health-config {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.health-config h3 {
  margin: 0;
}

.health-config label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
}

.health-run-btn {
  width: 100%;
  padding: 12px;
  font-size: 1rem;
}

.health-report {
  min-height: 200px;
}

.health-ready {
  text-align: center;
  padding: 40px;
  color: #64748b;
}

.health-ready p:first-child {
  font-size: 1.25rem;
  margin-bottom: 8px;
}

.health-ready p:last-child {
  font-size: 0.875rem;
}

/* Mobile Preview Mode */
.mobile-preview {
  max-width: 375px;
  margin: 0 auto;
  border-left: 1px solid #334155;
  border-right: 1px solid #334155;
}

.mobile-preview .sidebar {
  width: 100%;
  max-width: 100%;
}

/* Admin-only elements */
[data-admin-only][hidden] {
  display: none !important;
}

/* Textarea sizes */
.textarea-medium {
  min-height: 100px;
}

.textarea-large {
  min-height: 200px;
}

/* Health Checker additional styles */
.health-description {
  color: #94a3b8;
  margin-bottom: 16px;
}

.health-config-card {
  margin-bottom: 16px;
}

.health-strict-label {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
}

/* Utility classes for inline style removal */
.section-title {
  margin: 12px 0 8px 0;
  font-size: 1rem;
}

.flex-end {
  display: flex;
  align-items: flex-end;
}

.flex-gap-8 {
  display: flex;
  gap: 8px;
}

.muted-note {
  font-size: 0.875rem;
  color: #64748b;
  margin: 8px 0 0 0;
}

.small-muted {
  font-size: 0.75rem;
  color: #64748b;
  margin-top: 4px;
}

.modal-top {
  z-index: 1100;
}

.modal-dialog-medium {
  width: 480px;
}

.w-60 {
  width: 60px;
}

.progress-fill {
  width: 0%;
  transition: width 0.2s ease;
}

.error-text {
  color: #dc2626;
  font-size: 0.875rem;
}

.section-divider {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
}

.timing-header {
  margin: 0 0 12px 0;
  font-size: 1rem;
}

.task-timing-block {
  margin: 12px 0;
}

.task-initial-label {
  font-size: 0.875rem;
  color: #0D2850;
  margin-bottom: 8px;
}

.label-block {
  display: block;
  margin-bottom: 12px;
}

.label-block-simple {
  display: block;
}

.input-row {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.cluster-preload {
  margin-top: 12px;
}

.hidden {
  display: none !important;
}
